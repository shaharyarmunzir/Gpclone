<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Gpay</title>
  <link rel="icon" type="image/x-icon" href="Google_Pay_2018_icon.svg">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  :root{
    --bg:#071018;
    --sheet:#0f1720;
    --muted:#bfc9d6;
    --accent1:#ff6b6b; /* top-left */
    --accent2:#ffb74d; /* top-right */
    --accent3:#3aa0ff; /* bottom-left */
    --accent4:#16a34a; /* bottom-right */
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;color:#fff}
  .wrap{min-height:100vh;display:flex;flex-direction:column}
  /* camera area */
  .camera-wrap{position:relative;flex:1;overflow:hidden}
  video#camera {
    width:100%;
    height:100%;
    object-fit:cover;
    transform:scaleX(-1); /* mirror for natural feel */
    filter: contrast(0.9) saturate(1.05);
    background:linear-gradient(180deg,#05202a,#071018);
  }
  /* scanner overlay (centered rounded rectangle with colored corners) */
  .scan-overlay{
    position:absolute;
    top:10%;
    left:50%;
    transform:translateX(-50%);
    width:78%;
    max-width:420px;
    aspect-ratio:1/0.9;
    border-radius:18px;
    box-shadow: inset 0 0 0 1000px rgba(5,10,12,0.35);
    /* keep an inner translucent rectangle */
    pointer-events:none;
    display:flex;align-items:center;justify-content:center;
  }
  .scan-overlay::after{
    content:"";
    position:absolute;
    inset:10px;
    border-radius:14px;
    box-shadow: 0 0 0 9999px rgba(0,0,0,0.25);
    mix-blend-mode: normal;
  }
  /* colored corner strokes */
  .corner{position:absolute;width:44px;height:44px;border-radius:10px;box-sizing:border-box}
  .corner.tl{top:8%;left:11%;border-top:6px solid var(--accent1);border-left:6px solid var(--accent1);border-top-left-radius:14px;transform:translate(-6px,-6px)}
  .corner.tr{top:8%;right:11%;border-top:6px solid var(--accent2);border-right:6px solid var(--accent2);transform:translate(6px,-6px)}
  .corner.bl{bottom:22%;left:11%;border-bottom:6px solid var(--accent3);border-left:6px solid var(--accent3);transform:translate(-6px,6px)}
  .corner.br{bottom:22%;right:11%;border-bottom:6px solid var(--accent4);border-right:6px solid var(--accent4);transform:translate(6px,6px)}
  /* top icons row */
  .top-icons{position:absolute;top:8px;left:0;right:0;display:flex;justify-content:space-between;padding:12px 14px;align-items:center;pointer-events:auto}
  .top-left{display:flex;gap:12px;align-items:center}
  .icon-btn{background:rgba(0,0,0,0.35);padding:6px;border-radius:8px;backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center}
  .icon-btn svg{width:20px;height:20px;fill:#fff;opacity:.95}
  /* upload button center bottom of camera */
  .upload-btn{
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    top:55%;
    z-index:40;
    pointer-events:auto;
  }
  .upload-btn .btn{
    background:rgba(255,255,255,0.92);
    color:#0b1220;
    border-radius:999px;
    padding:10px 18px;
    box-shadow:0 8px 24px rgba(2,6,23,0.5);
    font-weight:600;
  }
  /* bottom sheet */
  .bottom-sheet{
    position:fixed;
    left:0;right:0;bottom:0;
    background:linear-gradient(180deg, rgba(15,22,26,0.98), rgba(10,12,15,0.98));
    border-top-left-radius:18px;border-top-right-radius:18px;
    padding:18px;
    text-align:center;
    box-shadow:0 -12px 30px rgba(2,6,23,0.6);
    pointer-events:auto;
  }
  .bottom-sheet h3{margin:0;font-size:18px;font-weight:700}
  .bottom-sheet p{margin:6px 0 0;color:var(--muted);font-size:13px}
  /* small hint bar */
  .hint-bar{height:6px;width:70px;background:rgba(255,255,255,0.18);border-radius:6px;margin:10px auto 0}
  /* responsive safe area */
  @media (min-width:420px){
    .scan-overlay{top:9%}
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="camera-wrap">
    <video id="camera" autoplay playsinline></video>

    <div class="scan-overlay" aria-hidden="true">
      <div class="corner tl"></div>
      <div class="corner tr"></div>
      <div class="corner bl"></div>
      <div class="corner br"></div>
    </div>

    <div class="top-icons">
      <div class="top-left">
        <div class="icon-btn" id="btn-close" title="Close" onclick="alert('Demo: close')">
          <!-- X -->
          <svg viewBox="0 0 24 24"><path d="M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7A1 1 0 0 0 5.7 7.11L10.59 12l-4.9 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.9a1 1 0 0 0 1.41-1.41L13.41 12l4.9-4.89a1 1 0 0 0 0-1.4z"/></svg>
        </div>
      </div>

      <div style="display:flex;gap:10px;align-items:center">
        <div class="icon-btn" id="btn-flash" title="Flash" onclick="toggleFlash()">
          <!-- flashlight icon -->
          <svg viewBox="0 0 24 24"><path d="M7 2v6h3v6l2 4h2l2-4V8h3V2H7z"/></svg>
        </div>
        <div class="icon-btn" id="btn-qr" title="My QR" onclick="alert('Demo: show QR')">
          <svg viewBox="0 0 24 24"><path d="M3 3h8v8H3zM13 3h8v8h-8zM3 13h8v8H3zM13 13h2v2h-2z"/></svg>
        </div>
        <div class="icon-btn" id="btn-more" title="More" onclick="alert('Demo: more')">
          <svg viewBox="0 0 24 24"><path d="M12 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>
        </div>
      </div>
    </div>

    <div class="upload-btn">
      <label for="fileInput" class="btn">
        <svg style="width:18px;height:18px;vertical-align:middle;margin-right:8px" viewBox="0 0 24 24"><path fill="currentColor" d="M5 20h14v-2H5v2zm7-18L5.33 9.67h3.99V18h4.48V9.67h3.99L12 2z"/></svg>
        Upload from gallery
      </label>
      <input id="fileInput" type="file" accept="image/*" style="display:none" />
    </div>

  </div>

  <div class="bottom-sheet">
    <div class="hint-bar" aria-hidden="true"></div>
    <h3>Scan any QR code to pay</h3>
    <p>Google Pay · PhonePe · PayTM · UPI</p>
  </div>
</div>

<script>
  // Camera setup
  const video = document.getElementById('camera');
  let currentStream = null;
  async function startCamera(){
    try{
      const constraints = { video: { facingMode: 'environment' }, audio:false };
      const stream = await navigator.mediaDevices.getUserMedia(constraints);
      video.srcObject = stream;
      currentStream = stream;
      // try to get track for torch (if supported)
      window._videoTrack = stream.getVideoTracks()[0];
    }catch(err){
      console.warn('Camera not available:', err);
      video.poster = '';
    }
  }
  startCamera();

  // flash toggle (if supported)
  async function toggleFlash(){
    try{
      const track = window._videoTrack;
      if(!track) return alert('Flash not supported on this device (demo).');
      const capabilities = track.getCapabilities();
      if(!capabilities.torch) return alert('Torch not available (demo).');
      const settings = track.getSettings();
      const on = !settings.torch;
      await track.applyConstraints({ advanced:[{torch: on}] });
    }catch(e){
      console.warn(e);
      alert('Flash toggle not supported (demo).');
    }
  }

  // Handle file upload (simulate scanning)
  const fileInput = document.getElementById('fileInput');
  fileInput.addEventListener('change', (e)=>{
    const f = e.target.files[0];
    if(!f) return;
    // simple demo: show name and "scanned" result
    alert('Selected image: ' + f.name + '\n\nDemo result: QR code recognized (mock).');
    // reset input
    fileInput.value = '';
  });

  // simulate real-time scanning: for demo, we'll try to capture a frame every 1.5s and pretend to detect
  let scanAttempts = 0;
  const simulateScanInterval = setInterval(()=>{
    // For demo safety: do not actually decode QR here.
    // We'll randomly "detect" a QR after a couple tries to simulate UX.
    if(!video || video.readyState < 2) return;
    scanAttempts++;
    if(scanAttempts === 4){
      clearInterval(simulateScanInterval);
      // show a demo result modal/alert
      setTimeout(()=> {
        if(confirm('Demo: QR detected — Open payment preview?')){
          alert('This is a demo. No real payment is processed.');
        }
      }, 300);
    }
  }, 1400);

  // cleanup on page unload
  window.addEventListener('beforeunload', ()=>{
    if(currentStream){
      currentStream.getTracks().forEach(t=>t.stop());
    }
  });

  // Accessibility: clicking overlay corners does nothing; main buttons have actions
</script>
</body>
</html>
